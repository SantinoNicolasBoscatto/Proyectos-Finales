@if(listaMarcas){
    <form [formGroup]="form" (submit)="guardarCambios()">
        <div class="row">
            <div class="col-3"></div>
            <div class="col-md-6">
                <mat-form-field class="d-block">
                    <mat-label>Marcas</mat-label>
                    <mat-select [formControl]="form.controls.marca" [(ngModel)]="selectedMarca">
                        @for (marca of listaMarcas; track $index) {
                            <mat-option [value]="marca.id">{{marca.nombre}}
                                <img [src]="marca.foto" alt="" height="35" width="50">
                            </mat-option>
                        }
                    </mat-select>
                    <mat-error>{{ErrorCampoMarca()}}</mat-error>
                </mat-form-field>
                <mat-form-field class="d-block">
                    <mat-label>Pilotos</mat-label>
                    <mat-select [formControl]="form.controls.piloto" [(ngModel)]="selectedPiloto">
                        @for (piloto of listaPilotos; track $index) {
                            <mat-option [value]="piloto.id">{{piloto.nombre}}
                                <img [src]="piloto.fotoPiloto" alt="" height="45" width="45" class="pilotoImg">
                            </mat-option>
                        }
                    </mat-select>
                    <mat-error>{{ErrorCampoPiloto()}}</mat-error>
                </mat-form-field> 
                <app-selector-fotos (archivoSeleccionado)="archivoSelect($event)" [urlImagen]="modelo?.foto"></app-selector-fotos>
            </div>
            <div class="col-3"></div>
        </div>
        <div class="mt-4 d-flex justify-content-center">
            <button mat-flat-button type="submit" class="me-2" [ngClass]="{'d-none': form.invalid === true}">Agregar</button>
            <button [routerLink]="routeBack" mat-flat-button color="warn" class="ms-2" type="button">Volver</button>
        </div>
    </form>
    <br>
}
@else {
    <app-loading></app-loading>
}